---
title: 前端面试之浏览器【数据存储】
categories: 
- 前端
- 面试
tags: 
- 前端
- 面试
---

浏览器的数据存储！

<!--more-->



## 浏览器中的存储功能

> 有四种存储功能：cookie、localStorage、sessionStorage、indexDB。



### 一、各个存储方式的区别？

###### ▉ 数据生命周期

| **cookie**         | 一般由服务器生成，可以设置过期时间。 |
| ------------------ | ------------------------------------ |
| **localStorage**   | **除非被清理，否则一直存在。**       |
| **sessionStorage** | **页面关闭就清理。**                 |
| **indexDB**        | **除非被清理，否则一直存在。**       |



###### ▉ 数据存储大小

| **cookie**         | 4K       |
| ------------------ | -------- |
| **localStorage**   | **5M**   |
| **sessionStorage** | **5M**   |
| **indexDB**        | **无限** |



###### ▉ 与服务器通信

| **cookie**         | 每次都会携带在 header 中，对于请求性能影响 |
| ------------------ | ------------------------------------------ |
| **localStorage**   | **不参与**                                 |
| **sessionStorage** | **不参与**                                 |
| **indexDB**        | **不参与**                                 |





### 二、谈谈 Cookie

#### 1、Cookie 的由来

> 因为 Http 是不保存状态的协议，所以在请求中插入一个 token 作为标识，但是这种方式易出错，所以有了 Cookie 的出现。



#### 2、Cookie 的原理

> 第一次访问网站，浏览器发出请求，服务器响应之后，将 Cookie 放到响应中。当浏览器发送第二次请求的时候，就会携带 Cookie 用于辨别用户身份，服务器收到信息之后就会辨别用户的信息，做出相应的回应。



#### 3、不可跨域性

> 在不同的域名下，每个 Cookie 会绑定单一的域名。



#### 4、Cookie 的属性

- **name:** 代表 cookie 的名字，不同的 name 会被覆盖掉。
- **value:** 代表 cookie 的值。由于cookie规定是名称/值是不允许包含分号，逗号，空格的，所以为了不给用户到来麻烦，考虑服务器的兼容性，任何存储 cookie 的数据都应该被 URL 编码。
- **domain:** 代表当前 Cookie 绑定的域名。统一域名的二级域名是不能交换 Cookie 的。
- **path:** 默认设置为 ‘/’ ，否则会将路径路由绑定 Cookie。
- **expires：**Cookie 的有效期，已经逐渐被 Max-Age 逐渐取代。默认的配置是当关闭浏览器，Cookie自动会被删除。该字段是以秒为单位的，整数时，过了多少秒之后就会被删除。为 0 时，删除 Cookie。为负数时，就会当浏览器窗口关闭时，Cookie 的就会消失。

- **secure：**当这个属性设置为true时，此cookie只会在 https 和 ssl 等安全协议下传输。
- **HttpOnly:** 如果设置为 true，就不能通过 js 脚本获取，有效防止 XSS 攻击。



#### 5、设置 Cookie

```
document.cookie = 'myname=laihuamin;path=/;domain=.baidu.com';
```











