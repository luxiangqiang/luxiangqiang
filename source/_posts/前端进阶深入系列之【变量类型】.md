---
title: 前端进阶深入系列之【变量类型】
categories: 
- 前端
- javascript
- 前端深入系列
tags: 
- 前端
- javascript
- 前端深入系列
---

深入探究 javascript 变量类型！

<!--more-->



### 一、变量的分类

> 在 javascript 中，我们通常使用三个关键字来定义变量：var、let、const。我们从两个角度对这三个变量进行分类：可变性和词法环境。



#### 1、分类一：可变性

> 可变性表示的是变量一旦声明，后续是否是可变的，分为两组，分别为 {const} 和 {let、var}。



###### ▉ const 特性一：

> const 声明的是静态变量，一旦声明并赋予初始值，就不允许重新赋值，否则 javascript 就会抛出异常。



###### ▉ const 特性二：

> 虽然不可以对变量进行赋值，但是可以对 const 声明的对象进行重新修改。



###### ▉ const 特性三：

> 用 const 声明的数组也是一样的，不能重新赋值但是可以进行修改。



#### 2、分类二：词法环境（作用域）

> 按照词法环境进行分类，其实就是按照作用域进行分类，分为两组分别为 {var} 和 {let，const}。



###### ▉ 关键词 var

> 该关键词是在距离最近的**函数内部**或**全局的作用域**（变量将挂载到 `window` 对象上）中定义的（忽略块级作用域）。—— 在块级作用域外可以访问到块级作用域内的变量。



###### ▉ 关键词 let 和 const

> let 和 const 直接在最近的作用域中定义变量（包括块级作用域、函数内、全局作用域）。



### 二、词法环境中注册标识符

> 这部分内容是变量提升的真正原理。变量的声明提升至函数的顶部，函数的声明提升至全局代码的顶部。真正的原理是，代码在执行前，先在词法环境中进行了注册。



#### 1、标识符的注册过程

> javascript 代码执行是分成两个阶段的，**一但创建新的词法环境，就会执行第一阶段。**

- **第一阶段：**javascript 引擎会访问并注册当前词法环境（作用域）中的所有变量和函数。

- **第二阶段：**本阶段的执行主要取决于**变量的类型**（let、var、const）和**环境类型**（全局环境、局部环境、块级作用域）。

  > 1）如果创建的是一个函数环境，那么就创建形参及函数参数的默认值（非函数环境则跳过）。
  >
  > 2）扫描当前代码进行函数声明（只扫描当前的函数环境内）。如果创建的是全局或函数环境，
  >
  > （**注意：**此过程不会扫描**函数表达式**和**箭头函数**）。对于找到的函数声明，将创建该函数，并将标识符绑定到当前环境中相同的标识符上。若已经存在，则将覆盖。
  >
  > 3）扫描当前代码进行进行变量声明。在函数或全局作用域中，找到当前函数以及其他函数之外 var 声明的变量。并找到其他函数或代码块之外 let 或 const 声明的变量。
  >
  > 4）在块级作用域中，仅查找当前块中通过 let 或 const 声明的变量。
  >
  > 5）对于所查找到的变量，若标识符不存在，则标识为 undefined ，否则存储当前的值。

  

###### ▉ 函数声明之前调用函数

> 若函数是作为函数声明定义的，则可以在声明之前调用函数。如果以函数表达式或箭头函数定义的，则不可以在声明之前访问函数。



###### ▉ 函数的重载

> 函数的重载之所以出现下面这种原因，是直接由标识符的注册导致的，也就是人们所说的变量提升。

```javascript
console.log(typeof fun) // “function”

var fun = 1;

console.log(typeof fun) // “number”

function fun(){}
```

> 1、在处理过程中，通过函数声明定义的函数在代码执行之前定义过了，所以 fun 已经有值的。
>
> 2、在处理变量的声明时，当前环境中未声明的变量将会注册为 undefined，因为 fun 早已经注册过了，所以当执行代码执行到 fun 等于 1 时，就会改变。







































































